<script>
  // Open-Meteo API - João Pessoa (PB)
  fetch('https://api.open-meteo.com/v1/forecast?latitude=-7.12&longitude=-34.86&current=temperature_2m,wind_speed_10m,relative_humidity_2m&timezone=America%2FSao_Paulo')
    .then(response => response.json())
    .then(data => {
      const temp = data.current.temperature_2m;
      const vento = data.current.wind_speed_10m;
      const umidade = data.current.relative_humidity_2m;

      // Temperatura
      new Chart(document.getElementById('tempChart'), {
        type: 'bar',
        data: {
          labels: ['Agora'],
          datasets: [{
            label: 'Temperatura (°C)',
            data: [temp],
            backgroundColor: '#e63946'
          }]
        },
        options: {
          responsive: true,
          scales: { y: { beginAtZero: true, max: 45 } }
        }
      });

      // Vento
      new Chart(document.getElementById('ventoChart'), {
        type: 'bar',
        data: {
          labels: ['Agora'],
          datasets: [{
            label: 'Vento (km/h)',
            data: [vento],
            backgroundColor: '#1d3557'
          }]
        },
        options: {
          responsive: true,
          scales: { y: { beginAtZero: true, max: 30 } }
        }
      });

      // Público simulado (mantido)
      new Chart(document.getElementById('publicoChart'), {
        type: 'doughnut',
        data: {
          labels: ['Norte', 'Sul', 'Leste', 'Oeste'],
          datasets: [{
            label: 'Público',
            data: [3600, 2200, 3100, 4000],
            backgroundColor: ['#457b9d', '#a8dadc', '#f4a261', '#e76f51']
          }]
        },
        options: {
          responsive: true
        }
      });
    })
    .catch(error => {
      console.error('Erro ao buscar dados climáticos:', error);
    });
</script>
